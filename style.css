/* =========================================================
   HUMAN LIMIT — CANONICAL STYLE.CSS (single-source)
   - One background system: Banner Protocol (data-bg)
   - No legacy --banner pipeline
   ========================================================= */

/* Base tokens */
:root{
  --bg:#0b0b0b;
  --fg:#cfcfcf;
  --dim:#8e8e8e;
  --dim2:#5f5f5f;

  /* HL Banner Protocol: file map (do not rename files) */
  --hl-bg-entry:     url("/human-limit/images/png/hl-entry-banner-01.png");
  --hl-bg-access:    url("/human-limit/images/png/hl-access-banner-01.png");
  --hl-bg-interface: url("/human-limit/images/png/hl-interface-banner-01.png");
  --hl-bg-world:     url("/human-limit/images/png/hl-world-banner-01.png");
  --hl-bg-system:    url("/human-limit/images/png/hl-system-banner-01.png");
  --hl-bg-subjects:  url("/human-limit/images/png/hl-subjects-banner-01.png");
  --hl-bg-archive:   url("/human-limit/images/png/hl-archive-banner-01.png");

  /* Global readability tuning (keep LOW; banners already dark) */
  --hl-dim: 0.06;        /* overall dark overlay */
  --hl-vignette: 0.14;   /* vignette strength */
  --hl-contrast: 1.08;   /* banner clarity */
  --hl-saturate: 0.95;   /* near-monochrome */

  /* Panel (glass) */
  --panel-bg: rgba(0,0,0,.16);
  --panel-border: rgba(255,255,255,.18);
  --panel-shadow: 0 0 0 1px rgba(255,255,255,.08) inset, 0 18px 60px rgba(0,0,0,.55);
  --panel-blur: 8px;
}

/* Global reset-ish */
*,
*::before,
*::after{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

html,body{ height:100%; }

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:"JetBrains Mono", monospace;
  font-weight:400;
  padding:64px 48px;
  line-height:26px;

  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;

  overflow-x:hidden;
  user-select:text;

  position:relative;
}

a{ color:inherit; text-decoration:none; }

.dim{ color:var(--dim); }
.dim2{ color:var(--dim2); }
.warn{ color:var(--fg); }

/* UI nodes */
.node{
  display:inline-block;
  color:var(--fg);
  cursor:pointer;
}
.node:hover{ text-decoration:underline; }
.node::before{ content:"> "; color:var(--fg); }

.cursor{
  display:inline-block;
  width:10px;
  margin-left:6px;
  animation:blink 1s infinite;
}
@keyframes blink{
  0%,49%{opacity:0;}
  50%,100%{opacity:1;}
}

.spacer-1{ height:18px; }
.spacer-2{ height:28px; }
.spacer-3{ height:16px; }

.title{
  font-weight:600;
  letter-spacing:0.3px;
  color:var(--fg);
}

.title, .node, .cursor{ user-select:none; }
input, textarea, .output{ user-select:text; }

/* Subject rows */
.subject-row{
  display:block;
  color:var(--dim);
  cursor:pointer;
  transition:color .12s ease, opacity .12s ease;
}
.subject-row:hover{ color:var(--fg); }
.subject-row:active{ opacity:0.55; }
.subject-row:focus{ outline:none; color:var(--fg); }

.is-busy .subject-row,
.is-busy .cmd,
.is-busy .node{
  pointer-events:none;
  opacity:0.6;
}

.hint{ color:var(--dim2); transition:opacity .15s ease; }

/* Back link (keep as-is, but readable on dark) */
.back-link{
  position:absolute;
  top:12px;
  left:14px;
  font-size:11px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:rgba(255,255,255,.65);
  text-decoration:none;
  font-weight:700;
  z-index:5;
}
.back-link:hover{ color:rgba(255,255,255,.92); }

/* =========================================================
   SYSTEM NODE INDICATOR (NODE: ACTIVE)
   ========================================================= */

.sys-node{
  position: fixed;
  top: 14px;
  right: 14px;
  z-index: 60;

  display: inline-flex;
  align-items: center;
  gap: 10px;

  padding: 8px 10px;
  border-radius: 12px;

  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);

  font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  letter-spacing: .10em;
  text-transform: uppercase;

  color: rgba(255,255,255,.70);

  pointer-events: none;
  user-select: none;

  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.sys-node .dot{
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: rgba(255,255,255,.52);
  opacity: .55;

  animation: sysPulse 3.2s ease-in-out infinite;
}

.sys-node .label{
  white-space: nowrap;
}

@keyframes sysPulse{
  0%   { transform: scale(1);    opacity: .40; }
  35%  { transform: scale(1.05); opacity: .68; }
  55%  { transform: scale(1);    opacity: .45; }
  100% { transform: scale(1);    opacity: .40; }
}

@media (prefers-reduced-motion: reduce){
  .sys-node .dot{ animation: none; opacity: .55; }
}

/* =========================================================
   HL — Banner Protocol (single background pipeline)
   Activate by adding: <body data-bg="entry|access|...">
   ========================================================= */

body[data-bg]{
  background:#000; /* fallback */
}

/* banner image layer */
body[data-bg]::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-2;
  background-position:center;
  background-size:cover;
  background-repeat:no-repeat;
  filter: contrast(var(--hl-contrast)) saturate(var(--hl-saturate));
  transform: scale(1.02);
  pointer-events:none;
}

/* readability layer */
body[data-bg]::after{
  content:"";
  position:fixed;
  inset:0;
  z-index:-1;
  pointer-events:none;
  opacity:1;

  background:
    radial-gradient(1200px 760px at 55% 42%,
      rgba(255,255,255, 0.06),
      rgba(0,0,0, var(--hl-vignette))
    ),
    linear-gradient(
      180deg,
      rgba(0,0,0, calc(var(--hl-dim) + 0.06)),
      rgba(0,0,0, calc(var(--hl-dim) + 0.14))
    );
}

/* Mapping (the ONLY mapping layer) */
body[data-bg="entry"]::before     { background-image: var(--hl-bg-entry); }
body[data-bg="access"]::before    { background-image: var(--hl-bg-access); }
body[data-bg="interface"]::before { background-image: var(--hl-bg-interface); }
body[data-bg="world"]::before     { background-image: var(--hl-bg-world); }
body[data-bg="system"]::before    { background-image: var(--hl-bg-system); }
body[data-bg="subjects"]::before  { background-image: var(--hl-bg-subjects); }
body[data-bg="archive"]::before   { background-image: var(--hl-bg-archive); }

/* Prevent legacy fullscreen layers from hiding banners */
body[data-bg] .bg,
body[data-bg] .veil,
body[data-bg] .bg-scene,
body[data-bg] .bg-layer,
body[data-bg] .bg-fx,
body[data-bg] .bg-dim{
  display:none !important;
}

/* =========================================================
   Panels (Entry page / Interface panels)
   ========================================================= */

.panel{
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  box-shadow: var(--panel-shadow);
  backdrop-filter: blur(var(--panel-blur));
  -webkit-backdrop-filter: blur(var(--panel-blur));
}

/* Mobile */
@media (max-width:680px){
  body{
    padding:28px 16px;
    line-height:24px;
  }
}