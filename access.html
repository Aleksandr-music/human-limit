<!-- access.html | Human Limit — Access -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HUMAN LIMIT — Access</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">

  <!-- page requires nothing; it's the entry to clearance -->
  <style>
    :root{
      --line: rgba(255,255,255,.14);
      --muted: rgba(255,255,255,.68);
      --faint: rgba(255,255,255,.48);
      --hard: rgba(255,255,255,.92);
      --pad: 22px;
      --max: 980px;
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color:var(--hard);
      background:#000;
      overflow-x:hidden;
    }

    .wrap{
      position:relative;
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:70px var(--pad);
    }

    .panel{
      width:min(var(--max), 100%);
      border:1px solid var(--line);
      border-radius:18px;
      padding:22px 18px;
    }

    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      padding-bottom:14px;
      border-bottom:1px solid rgba(255,255,255,.10);
      margin-bottom:16px;
    }

    .back{
      color:var(--muted);
      text-decoration:none;
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      border-bottom:1px solid transparent;
      padding-bottom:2px;
      white-space:nowrap;
    }
    .back:hover{ border-bottom-color: rgba(255,255,255,.26); }

    h1{
      margin:0;
      font-size:16px;
      letter-spacing:.14em;
      text-transform:uppercase;
      line-height:1.2;
      text-align:center;
      flex:1;
    }

    .hint{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      line-height:1.55;
    }

    .field{
      margin-top:16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .code{
      flex:1;
      min-width:240px;
      padding:14px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.30);
      color:var(--hard);
      font-size:14px;
      letter-spacing:.22em;
      text-transform:uppercase;
      outline:none;
    }
    .code::placeholder{
      color:rgba(255,255,255,.35);
      letter-spacing:.10em;
    }
    .code:focus{ border-color: rgba(255,255,255,.28); }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:14px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      color:var(--hard);
      background:rgba(0,0,0,.30);
      text-decoration:none;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
      min-width:200px;
    }
    .btn:hover{ border-color: rgba(255,255,255,.28); }

    .status{
      margin-top:14px;
      border-top:1px solid rgba(255,255,255,.10);
      padding-top:12px;
      font-size:12px;
      color:var(--muted);
      line-height:1.6;
      white-space:pre-line;
      min-height:46px;
    }

    .ok{ color: rgba(255,255,255,.92); }
    .bad{ color: rgba(255,255,255,.72); }
    .k{ color: var(--faint); }
  </style>
</head>

<body data-bg="access">
  <main class="wrap">
    <section class="panel" aria-label="Access panel">
      <div class="top">
        <a class="back" href="index.html">← Back</a>
        <h1>HUMAN LIMIT — ACCESS</h1>
        <span aria-hidden="true" style="width:60px"></span>
      </div>

      <div class="hint" id="reqHint">
        Enter 6-digit access code.<br>
        Clearance state persists on this device.
      </div>

      <div class="field">
        <input class="code" id="code" inputmode="numeric" autocomplete="one-time-code"
               maxlength="6" placeholder="______" aria-label="Access code">
        <button class="btn" id="enter" type="button">Authorize</button>
      </div>

      <div class="status" id="status" aria-live="polite"></div>
    </section>
  </main>

  <script src="hl-core.js"></script>
  <script>
    (function(){
      const codeEl = document.getElementById("code");
      const btn = document.getElementById("enter");
      const status = document.getElementById("status");
      const reqHint = document.getElementById("reqHint");

      const url = new URL(window.location.href);
      const need = (url.searchParams.get("need") || "").toUpperCase();
      const from = (url.searchParams.get("from") || "").toUpperCase();

      if (need) {
        reqHint.textContent =
          "Access denied.\n" +
          "Required clearance: " + need + "\n" +
          (from ? ("Requested page: " + from) : "");
      }

      function write(lines, ok){
        status.textContent = lines.join("\n");
        status.className = "status " + (ok ? "ok" : "bad");
      }

      function normalizeDigits(s){
        return String(s || "").replace(/\D/g, "").slice(0, 6);
      }

      function onInput(){
        const v = normalizeDigits(codeEl.value);
        codeEl.value = v;
      }

      function authorize(){
        const v = normalizeDigits(codeEl.value);
        if (v.length !== 6){
          write(["> INVALID LENGTH", "> EXPECTED: 6 DIGITS"], false);
          return;
        }

        const level = window.HL.matchCode(v);
        if (!level){
          write(["> CODE REJECTED", "> CLEARANCE: NONE"], false);
          return;
        }

        const set = window.HL.setClearance(level);
        write(["> AUTHORIZED", "> CLEARANCE: " + set, "> ROUTE: INTERFACE"], true);

        setTimeout(() => { window.location.href = "interface.html"; }, 450);
      }

      codeEl.addEventListener("input", onInput);
      btn.addEventListener("click", authorize);
      codeEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") authorize();
      });

      // show current state
      write(["> CURRENT CLEARANCE: " + window.HL.getClearance()], true);
      codeEl.focus();
    })();
  </script>
</body>
</html>