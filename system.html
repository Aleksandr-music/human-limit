<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>System Interface</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0b0b;
  --fg:#cfcfcf;
  --dim:#8e8e8e;
}

html,body{height:100%;}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:"JetBrains Mono", monospace;
  padding:64px 48px;
}

.title{
  font-weight:600;
  font-size:18px;
  margin-bottom:26px;
}

.node{
  display:block;
  font-size:16px;
  line-height:30px;
  color:var(--fg);
  text-decoration:none;
}

.node:hover{
  text-decoration:underline;
}

.node::before{
  content: "> ";
  color: var(--fg);
}

.dim{
  margin-top:34px;
  font-size:13px;
  color:var(--dim);
}

.cursor{
  display:inline-block;
  margin-left:6px;
  animation:blink 1s infinite;
}

@keyframes blink{
  0%{opacity:0;}
  50%{opacity:1;}
  100%{opacity:0;}
}

.cmdline{
  margin-top:28px;
  font-size:14px;
}

input{
  background:none;
  border:none;
  outline:none;
  color:var(--fg);
  font-family:"JetBrains Mono", monospace;
  font-size:14px;
  width:320px;
}

.output{
  margin-top:18px;
  font-size:14px;
  color:var(--dim);
  min-height:18px;
  white-space:pre-line;
}
</style>
</head>

<body>

<div class="title">HUMAN LIMIT â€” SYSTEM INTERFACE</div>

<a class="node" href="world.html">WORLD</a>
<a class="node" href="mechanics.html">SYSTEM</a>
<a class="node" href="subjects.html">SUBJECTS</a>
<a class="node" href="archive.html">ARCHIVE</a>

<div class="dim">
  ACCESS STATUS: ACTIVE<span class="cursor">_</span>
</div>

<div class="cmdline">
  > <input id="cmd" autofocus placeholder="">
</div>

<div id="output" class="output"></div>

<script>
const input = document.getElementById("cmd");
const output = document.getElementById("output");

function respond(text){
  output.textContent = "> " + text;
}

function respondMulti(lines){
  output.textContent = "> " + lines.join("\n> ");
}

function nav(node){
  const map = {
    world:   {msg:"ACCESSING WORLD NODE",    url:"world.html"},
    system:  {msg:"ACCESSING SYSTEM NODE",   url:"mechanics.html"},
    subjects:{msg:"ACCESSING SUBJECTS NODE", url:"subjects.html"},
    archive: {msg:"ACCESSING ARCHIVE NODE",  url:"archive.html"},

    /* HIDDEN NODE (not listed in help) */
    state:   {msg:"ACCESSING STATE MONITOR", url:"state.html"}
  };
  return map[node] || null;
}

function restricted(cmd){
  if(cmd === "help"){
    respondMulti([
      "LIMITED PROTOCOL AVAILABLE",
      "NAV: world | system | subjects | archive",
      "QUERY: subjects:list | subject <key>",
      "UTILITY: clear"
    ]);
    return "__handled__";
  }

  if(cmd === "override"){
    respondMulti([
      "OVERRIDE REJECTED",
      "AUDIT LOG ENTRY CREATED",
      "DEVIATION FLAGGED"
    ]);
    return "__handled__";
  }

  if(cmd === "exit") return "NO EXIT PARAMETERS FOUND";

  return null;
}

const SUBJECTS = {
  alex:   {id:"S-001", status:"ACTIVE",   access:"LIMITED"},
  kiwi:   {id:"S-003", status:"ACTIVE",   access:"LIMITED"},
  french: {id:"S-004", status:"ACTIVE",   access:"LIMITED"},
  mentor: {id:"S-002", status:"REDACTED", access:"DENIED"}
};

/* HIDDEN OBSERVATION MAP */
const OBSERVE = {
  alex:   "OBSERVATION: ACTIVE / CHANNELS: MULTIPLE",
  kiwi:   "OBSERVATION: ACTIVE / CHANNELS: LIMITED",
  french: "OBSERVATION: ACTIVE / CHANNELS: LIMITED",
  mentor: "OBSERVATION: DISALLOWED / REQUEST LOGGED"
};

function subjectLookup(key){
  const k = (key || "").toLowerCase().trim();
  const rec = SUBJECTS[k];
  if(!rec) return null;

  if(k === "mentor"){
    return [
      "RECORD FOUND",
      "SUBJECT: MENTOR",
      "ID: " + rec.id,
      "STATUS: " + rec.status,
      "ACCESS: " + rec.access,
      "DETAILS: [REDACTED]"
    ];
  }

  return [
    "RECORD FOUND",
    "SUBJECT: " + k.toUpperCase(),
    "ID: " + rec.id,
    "STATUS: " + rec.status,
    "ACCESS: " + rec.access
  ];
}

input.addEventListener("keydown", (e) => {
  if(e.key !== "Enter") return;

  const raw = input.value.trim();
  const value = raw.toLowerCase();
  input.value = "";

  if(!value){
    respond("AWAITING INPUT");
    return;
  }

  if(value === "clear"){
    output.textContent = "";
    return;
  }

  const r = restricted(value);
  if(r){
    if(r !== "__handled__") respond(r);
    return;
  }

  /* HIDDEN STATUS COMMAND */
  if(value === "drift"){
    respondMulti([
      "DRIFT STATUS",
      "LEVEL: WITHIN TOLERANCE",
      "OBSERVABILITY: LIMITED",
      "DISCLOSURE: NOT REQUIRED"
    ]);
    return;
  }

  /* HIDDEN OBSERVATION COMMAND */
  if(value === "observe"){
    respondMulti([
      "OBSERVATION PROTOCOL",
      "FORMAT: observe <subject>",
      "DISCLOSURE: MINIMAL"
    ]);
    return;
  }

  if(value.startsWith("observe ")){
    const key = value.slice("observe ".length).trim();
    const msg = OBSERVE[key] || "OBSERVATION: NO TARGET FOUND";
    respond(msg);
    return;
  }

  if(value === "subjects:list" || value === "subject:list"){
    respondMulti([
      "SUBJECT INDEX AVAILABLE",
      "QUERY FORMAT: subject <key>",
      "KNOWN KEYS: alex, mentor, kiwi, french"
    ]);
    return;
  }

  if(value.startsWith("subject ")){
    const key = value.slice("subject ".length).trim();
    if(!key){
      respond("SUBJECT KEY REQUIRED");
      return;
    }
    const lines = subjectLookup(key);
    if(lines){
      respondMulti(lines);
    }else{
      respond("NO RECORD FOUND");
    }
    return;
  }

  const res = nav(value);
  if(res){
    respond(res.msg);
    setTimeout(() => { window.location.href = res.url; }, 400);
    return;
  }

  respond("COMMAND NOT RECOGNIZED");
});
</script>

</body>
</html>